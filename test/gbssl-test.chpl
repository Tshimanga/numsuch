/*
 Designed to test the Modified Adsoprtion routine
 */
use NumSuch,
    MatrixMarket;


/*
var X = Matrix(
  [3.0, 0.2, 0.0, 0.7, 0.1],
  [0.2, 2.0, 0.3, 0.0, 0.0],
  [0.0, 0.3, 3.0, 0.9, 0.6],
  [0.7, 0.0, 0.9, 2.0, 0.0],
  [0.1, 0.0, 0.6, 0.0, 2.0]
);
 */

 var X = Matrix(
 [1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000],
 [0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130],
 [0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000],
 [1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000],
 [0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130],
 [0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000],
 [1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000],
 [0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130],
 [0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000],
 [1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000],
 [0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130],
 [0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000],
 [1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000],
 [0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130],
 [0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000],
 [1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000],
 [0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130],
 [0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000],
 [1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000,1.000,0.254,0.000],
 [0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130,0.254,1.000,0.130],
 [0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000,0.000,0.130,1.000]
 );

/*
 Only the first three rows are labeled
 */
var y = Matrix(
  [1,0,0],
  [0,1,0],
  [0,0,1],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0],
  [0,0,0]
  );

/*
 Test build the model from a matrix
 */
var model = new ModifiedAdsorptionModel();
model.fit(data=X, labels=y);
writeln("Yhat\n", model.Yhat);
